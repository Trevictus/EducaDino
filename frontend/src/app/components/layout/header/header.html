<header class="header">
  <div class="l-container header__container">

    <!-- Logo Desktop (imagen) y Logo Landscape (texto) -->
    <a routerLink="/home" class="header__logo header__logo--image" aria-label="EducaDino - Ir a inicio">
      <picture>
        <source
          type="image/avif"
          srcset="assets/images/logotipo-EducaDino400px.avif 400w,
                  assets/images/logotipo-EducaDino800px.avif 800w"
          sizes="(max-width: 640px) 150px, 200px">
        <img
          src="assets/images/logotipo-EducaDino400px.avif"
          alt="Logotipo de EducaDino - Plataforma educativa sobre dinosaurios"
          loading="eager"
          fetchpriority="high">
      </picture>
    </a>

    <a routerLink="/home" class="header__logo header__logo--text">
      Inicio
    </a>

    <!-- Navegación Desktop -->
    <nav class="header__nav">
      <ul class="header__menu">
        <li>
          <div class="header__search">
            <label for="search-input" class="visually-hidden">Buscar en EducaDino</label>
            <button
              type="button"
              class="header__search-icon-btn"
              aria-label="Enfocar campo de búsqueda"
              (click)="searchInput.focus()">
              <span class="material-icons" aria-hidden="true">search</span>
            </button>

            <input
              #searchInput
              id="search-input"
              type="search"
              placeholder="Buscar"
              aria-label="Buscar en EducaDino"
              (keyup.enter)="onSearch(searchInput.value)">
          </div>
        </li>
        <li><a routerLink="/minijuegos" class="header__link">Minijuegos</a></li>
        <li><a routerLink="/curiosidades" class="header__link">Curiosidades</a></li>
        <li><a routerLink="/ordenes" class="header__link">Órdenes</a></li>
        <li><a routerLink="/contacto" class="header__link">Contacto</a></li>
        <li><a routerLink="/style-guide" class="header__link">Guia de estilo</a></li>
        <li>
          <button
            class="header__more-menu"
            aria-label="Más opciones"
            aria-haspopup="true"
            [attr.aria-expanded]="isMoreMenuOpen"
            type="button"
            (click)="toggleMoreMenu()"
            [class.is-active]="isMoreMenuOpen">
            <span class="material-icons" aria-hidden="true">more_vert</span>
          </button>
          <ul class="header__more-menu-items" [class.is-open]="isMoreMenuOpen" role="menu">
            <li role="menuitem"><a routerLink="/home" class="header__more-link" (click)="closeMoreMenu()">Inicio</a></li>
            <li role="menuitem"><a routerLink="/style-guide" class="header__more-link" (click)="closeMoreMenu()">Guia de estilo</a></li>
          </ul>
        </li>
      </ul>
    </nav>

    <!-- Botón Hamburguesa (solo móvil) -->
    <button
      class="header__hamburger"
      [class.is-active]="isMenuOpen"
      (click)="toggleMenu()"
      aria-label="Abrir menú de navegación"
      [attr.aria-expanded]="isMenuOpen">
      <span class="header__hamburger-line"></span>
      <span class="header__hamburger-line"></span>
      <span class="header__hamburger-line"></span>
    </button>

    <!-- Theme Toggle (Modo oscuro/claro) -->
    <app-theme-toggle></app-theme-toggle>

    <!-- Perfil Desktop -->
    <a routerLink="/perfil" class="header__profile">
      <div class="header__star">
        <span>Perfil</span>
      </div>
    </a>

  </div>

  <!-- Menú Móvil -->
  <nav
    class="header__mobile-nav"
    [class.is-open]="isMenuOpen"
    [attr.aria-hidden]="!isMenuOpen">

    <ul class="header__mobile-menu">
      <li>
        <a routerLink="/minijuegos" class="header__mobile-link" (click)="closeMenu()">
          <span class="material-icons" aria-hidden="true">sports_esports</span>
          Minijuegos
        </a>
      </li>
      <li>
        <a routerLink="/curiosidades" class="header__mobile-link" (click)="closeMenu()">
          <span class="material-icons" aria-hidden="true">lightbulb</span>
          Curiosidades
        </a>
      </li>
      <li>
        <a routerLink="/ordenes" class="header__mobile-link" (click)="closeMenu()">
          <span class="material-icons" aria-hidden="true">category</span>
          Órdenes
        </a>
      </li>
      <li>
        <a routerLink="/contacto" class="header__mobile-link" (click)="closeMenu()">
          <span class="material-icons" aria-hidden="true">mail</span>
          Contacto
        </a>
      </li>
      <li>
        <a routerLink="/perfil" class="header__mobile-link" (click)="closeMenu()">
          <span class="material-icons" aria-hidden="true">person</span>
          Mi Perfil
        </a>
      </li>
    </ul>

  </nav>

  <!-- Overlay para cerrar el menú -->
  @if (isMenuOpen) {
    <div class="header__overlay" (click)="closeMenu()"></div>
  }

</header>
