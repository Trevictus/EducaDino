import{a as D}from"./chunk-PZT3XCYG.js";import{b as w,d as P,e as O,f as L,g as z,h as E,s as I,v as k}from"./chunk-H6FF5ZSZ.js";import"./chunk-PLSRGDJD.js";import{j as M,l as C,m as S}from"./chunk-F3I73XKZ.js";import{l as y}from"./chunk-PPSQSJV7.js";import{Ab as p,Bb as u,Cb as _,Ja as v,O as g,Va as c,Wa as d,ab as e,bb as o,kb as b,mb as m,wb as t,xa as l,xb as h,yb as x}from"./chunk-5N3JP377.js";import"./chunk-2NFLSA4Y.js";function N(r,a){if(r&1&&(e(0,"div",6),t(1),o()),r&2){let n=m();l(),x(" ",n.errorMessage," ")}}function R(r,a){if(r&1&&(e(0,"div",7),t(1," Debes iniciar sesi\xF3n para acceder a: "),e(2,"strong"),t(3),o()()),r&2){let n=m();l(3),h(n.returnUrl)}}var F=class r{authService=g(D);router=g(C);route=g(M);username="";password="";errorMessage="";successMessage="";returnUrl="/home";isLoading=!1;ngOnInit(){this.route.queryParams.subscribe(a=>{this.returnUrl=a.returnUrl||"/home"})}onSubmit(){if(!this.username||!this.password){this.errorMessage="Por favor completa todos los campos";return}this.isLoading=!0,this.errorMessage="",this.successMessage="";let a={username:this.username,password:this.password};this.authService.login(a).subscribe({next:n=>{this.isLoading=!1,this.successMessage="\u2705 Login exitoso. Redirigiendo...",setTimeout(()=>{this.router.navigate([this.returnUrl])},1e3)},error:n=>{this.isLoading=!1,this.errorMessage=n?.error?.message||"Credenciales incorrectas. Intenta de nuevo.",console.error("[Login] Error:",n)}})}static \u0275fac=function(n){return new(n||r)};static \u0275cmp=v({type:r,selectors:[["app-login"]],decls:25,vars:4,consts:[[1,"login"],[1,"login__container"],[1,"login__header"],[1,"login__icon"],[1,"login__title"],[1,"login__subtitle"],[1,"login__error"],[1,"login__info"],[1,"login__form",3,"ngSubmit"],[1,"login__field"],["for","username",1,"login__label"],["type","text","id","username","name","username","placeholder","Ingresa tu usuario","required","",1,"login__input",3,"ngModelChange","ngModel"],["for","password",1,"login__label"],["type","password","id","password","name","password","placeholder","Ingresa tu contrase\xF1a","required","",1,"login__input",3,"ngModelChange","ngModel"],["type","submit",1,"login__btn"],[1,"login__footer"],["routerLink","/home"]],template:function(n,i){n&1&&(e(0,"section",0)(1,"div",1)(2,"div",2)(3,"span",3),t(4,"\u{1F995}"),o(),e(5,"h1",4),t(6,"Iniciar Sesi\xF3n"),o(),e(7,"p",5),t(8,"Accede a tu cuenta de EducaDino"),o()(),c(9,N,2,1,"div",6),c(10,R,4,1,"div",7),e(11,"form",8),b("ngSubmit",function(){return i.onSubmit()}),e(12,"div",9)(13,"label",10),t(14,"Usuario"),o(),e(15,"input",11),_("ngModelChange",function(s){return u(i.username,s)||(i.username=s),s}),o()(),e(16,"div",9)(17,"label",12),t(18,"Contrase\xF1a"),o(),e(19,"input",13),_("ngModelChange",function(s){return u(i.password,s)||(i.password=s),s}),o()(),e(20,"button",14),t(21," Iniciar Sesi\xF3n "),o()(),e(22,"p",15)(23,"a",16),t(24,"\u2190 Volver al inicio"),o()()()()),n&2&&(l(9),d(i.errorMessage?9:-1),l(),d(i.returnUrl!=="/home"?10:-1),l(5),p("ngModel",i.username),l(4),p("ngModel",i.password))},dependencies:[y,k,E,w,P,O,I,z,L,S],styles:[".login[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;min-height:60vh;padding:var(--spacing-4)}.login__container[_ngcontent-%COMP%]{width:100%;max-width:400px;background-color:var(--background-color-hover);border-radius:20px;padding:var(--spacing-4);box-shadow:0 8px 30px #0000001a}.login__header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-3)}.login__icon[_ngcontent-%COMP%]{font-size:64px;display:block;margin-bottom:var(--spacing-1)}.login__title[_ngcontent-%COMP%]{font-family:var(--font-secondary);font-size:var(--font-size-4xl);color:var(--primary-color);margin:0}.login__subtitle[_ngcontent-%COMP%]{font-family:var(--font-primary);font-size:var(--font-size-xl);color:var(--text-color);margin-top:var(--spacing-1)}.login__error[_ngcontent-%COMP%]{background-color:#fee2e2;border:1px solid #ef4444;color:#b91c1c;padding:var(--spacing-2);border-radius:8px;margin-bottom:var(--spacing-2);font-family:var(--font-primary);font-size:var(--font-size-lg);text-align:center}.login__info[_ngcontent-%COMP%]{background-color:var(--secondary-color-disabled);border:1px solid var(--secondary-color);color:var(--text-color);padding:var(--spacing-2);border-radius:8px;margin-bottom:var(--spacing-2);font-family:var(--font-primary);font-size:var(--font-size-lg);text-align:center}.login__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-2)}.login__field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-1)}.login__label[_ngcontent-%COMP%]{font-family:var(--font-primary);font-size:var(--font-size-xl);font-weight:var(--font-weight-medium);color:var(--text-color)}.login__input[_ngcontent-%COMP%]{padding:var(--spacing-2);border:2px solid var(--gray-scale);border-radius:10px;font-family:var(--font-primary);font-size:var(--font-size-xl);transition:border-color .3s ease}.login__input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color)}.login__btn[_ngcontent-%COMP%]{margin-top:var(--spacing-2);padding:var(--spacing-2);background-color:var(--primary-color);color:var(--text-color-light);border:none;border-radius:12px;font-family:var(--font-primary);font-size:var(--font-size-xl);font-weight:var(--font-weight-semibold);cursor:pointer;transition:background-color .3s ease}.login__btn[_ngcontent-%COMP%]:hover{background-color:var(--primary-color-hover)}.login__footer[_ngcontent-%COMP%]{margin-top:var(--spacing-3);text-align:center;font-family:var(--font-primary);font-size:var(--font-size-lg)}.login__footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none}.login__footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};export{F as Login};
