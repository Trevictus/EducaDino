<section class="product-detail">
  @if (product) {
    <article class="product-detail__content">
      <div class="product-detail__image-container">
        <img
          [src]="product.image"
          [alt]="product.name"
          class="product-detail__image"
        />
        @if (product.featured) {
          <span class="product-detail__badge">‚≠ê Producto Destacado</span>
        }
      </div>

      <div class="product-detail__info">
        <nav class="product-detail__breadcrumb">
          <a routerLink="/productos">Productos</a>
          <span>/</span>
          <span>{{ product.category }}</span>
          <span>/</span>
          <span>{{ product.name }}</span>
        </nav>

        <span class="product-detail__category">{{ product.category }}</span>
        <h1 class="product-detail__title">{{ product.name }}</h1>
        <p class="product-detail__description">{{ product.description }}</p>

        <div class="product-detail__pricing">
          <span class="product-detail__price">{{ product.price | currency:'EUR' }}</span>
          <span class="product-detail__stock" [class.product-detail__stock--low]="product.stock < 10">
            @if (product.stock > 0) {
              {{ product.stock }} en stock
            } @else {
              Agotado
            }
          </span>
        </div>

        <div class="product-detail__actions">
          <button class="product-detail__btn product-detail__btn--primary">
            üõí A√±adir al carrito
          </button>
          <button
            class="product-detail__btn product-detail__btn--secondary"
            (click)="shareProduct()"
          >
            üì§ Compartir
          </button>
        </div>

        <button class="product-detail__back" (click)="goBack()">
          ‚Üê Volver a productos
        </button>
      </div>
    </article>

    <!-- Debug: Mostrar state de navegaci√≥n (solo desarrollo) -->
    @if (navigationState?.fromList) {
      <aside class="product-detail__debug">
        <h4>üì¶ State de Navegaci√≥n:</h4>
        <pre>{{ navigationState | json }}</pre>
      </aside>
    }
  } @else {
    <div class="product-detail__not-found">
      <span class="product-detail__not-found-icon">ü¶ï</span>
      <p>Producto no encontrado</p>
      <a routerLink="/productos" class="product-detail__back-link">
        Volver a productos
      </a>
    </div>
  }
</section>

