<div class="dino-food-game">
  @if (!gameStarted()) {
    <!-- Pantalla de inicio -->
    <div class="game-intro">
      <div class="intro-content">
        <h2 class="game-title"> Â¿QuÃ© come este Dino? </h2>
        <p class="game-description">
          Â¿Es herbÃ­voro (come plantas) o carnÃ­voro (come carne)? Â¡Elige sabiamente!
        </p>
        <div class="intro-features">
          <div class="feature">
            <span class="feature-icon">ğŸ¦–</span>
            <span class="feature-text">Identifica el dinosaurio</span>
          </div>
          <div class="feature">
            <span class="feature-icon">ğŸ¤”</span>
            <span class="feature-text">Piensa quÃ© come</span>
          </div>
          <div class="feature">
            <span class="feature-icon">ğŸ“š</span>
            <span class="feature-text">Aprende datos divertidos</span>
          </div>
        </div>
        <button class="btn-start" (click)="startGame()">
          Â¡Vamos!
        </button>
      </div>
    </div>
  }

  @if (gameStarted()) {
    <!-- Juego en progreso -->
    <div class="game-playing">
      <!-- Barra de progreso -->
      <div class="progress-bar">
        <div class="progress-fill" [style.width.%]="(currentQuestion() + 1) / totalQuestions * 100"></div>
      </div>
      <div class="progress-text">
        Pregunta {{ currentQuestion() + 1 }} de {{ totalQuestions }}
      </div>

      <!-- Pregunta -->
      <div class="question-content">
        <h3 class="question-title">{{ currentQuestionData.dinosaur }}</h3>

        <!-- Imagen del dinosaurio -->
        <div class="dino-container">
          <img
            [src]="currentQuestionData.dinoImage"
            [alt]="currentQuestionData.dinosaur"
            class="dino-image">
        </div>

        <!-- Opciones de respuesta -->
        <div class="food-options">
          <button
            class="food-btn food-btn--herbivore"
            [class.food-btn--selected]="selectedAnswer() === 'HerbÃ­voro'"
            [class.food-btn--correct]="showResult() && 'HerbÃ­voro' === currentQuestionData.correctAnswer"
            [class.food-btn--incorrect]="showResult() && selectedAnswer() === 'HerbÃ­voro' && 'HerbÃ­voro' !== currentQuestionData.correctAnswer"
            [disabled]="showResult()"
            (click)="selectAnswer('HerbÃ­voro')">
            <span class="food-emoji">ğŸ¥¬</span>
            <span class="food-label">HerbÃ­voro<br>(Come plantas)</span>
          </button>

          <button
            class="food-btn food-btn--carnivore"
            [class.food-btn--selected]="selectedAnswer() === 'CarnÃ­voro'"
            [class.food-btn--correct]="showResult() && 'CarnÃ­voro' === currentQuestionData.correctAnswer"
            [class.food-btn--incorrect]="showResult() && selectedAnswer() === 'CarnÃ­voro' && 'CarnÃ­voro' !== currentQuestionData.correctAnswer"
            [disabled]="showResult()"
            (click)="selectAnswer('CarnÃ­voro')">
            <span class="food-emoji">ğŸ–</span>
            <span class="food-label">CarnÃ­voro<br>(Come carne)</span>
          </button>
        </div>

        <!-- Resultado -->
        @if (showResult()) {
          <div class="result-feedback" [class.feedback--correct]="isCorrect()">
            @if (isCorrect()) {
              <div class="feedback-content">
                <span class="feedback-emoji">ğŸŒŸ</span>
                <span class="feedback-text">Â¡IncreÃ­ble!</span>
              </div>
            }
            @if (!isCorrect()) {
              <div class="feedback-content">
                <span class="feedback-emoji">ğŸ’­</span>
                <span class="feedback-text">
                  La respuesta era: <strong>{{ currentQuestionData.correctAnswer }}</strong>
                </span>
              </div>
            }
          </div>

          <!-- Dato divertido -->
          <div class="fun-fact">
            <span class="fact-icon">ğŸ’¡</span>
            <p class="fact-text">{{ currentQuestionData.fun_fact }}</p>
          </div>

          <!-- BotÃ³n siguiente -->
          @if (currentQuestion() < totalQuestions - 1) {
            <button class="btn-next" (click)="nextQuestion()">
              Siguiente â†’
            </button>
          }
          @if (currentQuestion() === totalQuestions - 1) {
            <button class="btn-next" (click)="nextQuestion()">
              Ver Resultados
            </button>
          }
        }
      </div>
    </div>
  }
</div>
