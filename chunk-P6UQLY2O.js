import{b as z}from"./chunk-GQBLVWNQ.js";import{a as W,b as N,d as I,e as L,f as q,g as B,h as V,i as A,n as R,o as j,p as G,r as K,s as U,v as J}from"./chunk-OOAOP2W6.js";import{l as k,m as T}from"./chunk-CEFKFVZH.js";import{$a as D,Bb as F,Db as w,Ha as x,O as b,Sa as f,Ta as v,Va as S,Vb as O,Wa as y,Wb as E,Xa as C,Ya as g,Za as t,_a as r,fb as m,hb as M,rb as o,sa as P,sb as _,tb as h,vb as p,wa as i,wb as s,xb as u}from"./chunk-AUSQS5M2.js";import"./chunk-2NFLSA4Y.js";var H=(a,c)=>c.value;function X(a,c){if(a&1&&(t(0,"div",4),o(1),r()),a&2){let d=M();i(),h(" \u2705 ",d.successMessage," ")}}function Y(a,c){if(a&1&&(t(0,"div",5),o(1),r()),a&2){let d=M();i(),h(" \u274C ",d.errorMessage," ")}}function Z(a,c){if(a&1&&(t(0,"option",22),o(1),r()),a&2){let d=c.$implicit;g("value",d),i(),_(d)}}function $(a,c){if(a&1&&(t(0,"option",22),o(1),r()),a&2){let d=c.$implicit;g("value",d.value),i(),_(d.label)}}function ee(a,c){a&1&&o(0," Guardando... ")}function te(a,c){a&1&&o(0," \u{1F4BE} Guardar Producto ")}function re(a,c){a&1&&(t(0,"p",37),o(1," \u26A0\uFE0F Tienes cambios sin guardar "),r())}var Q=class a{productService=b(z);router=b(k);formData={name:"",description:"",price:0,category:"",image:"img/t-rex.png",stock:0,featured:!1};isFormDirty=!1;isSubmitting=!1;successMessage="";errorMessage="";categories=["Kits Educativos","Figuras","Puzzles","Libros","Peluches","Juegos"];availableImages=[{value:"img/t-rex.png",label:"T-Rex"},{value:"img/velocirraptor.png",label:"Velociraptor"},{value:"img/triceratops.png",label:"Triceratops"},{value:"img/quetzalcoatl.png",label:"Quetzalcoatl"},{value:"img/argentinasaurus.png",label:"Argentinasaurio"}];canDeactivate(){return this.isSubmitting?!0:!this.isFormDirty}onFieldChange(){this.isFormDirty=!0,this.successMessage="",this.errorMessage=""}onSubmit(){this.validateForm()&&(this.isSubmitting=!0,this.productService.createProduct(this.formData).subscribe({next:c=>{this.isFormDirty=!1,this.successMessage=`Producto "${c.name}" creado exitosamente`,setTimeout(()=>{this.router.navigate(["/productos"],{state:{newProduct:c}})},2e3)},error:c=>{this.isSubmitting=!1,this.errorMessage="Error al crear el producto: "+c.message}}))}validateForm(){return this.formData.name.trim()?this.formData.description.trim()?this.formData.price<=0?(this.errorMessage="El precio debe ser mayor a 0",!1):this.formData.category?!0:(this.errorMessage="Selecciona una categor\xEDa",!1):(this.errorMessage="La descripci\xF3n es requerida",!1):(this.errorMessage="El nombre del producto es requerido",!1)}resetForm(){this.isFormDirty&&!confirm("\xBFEst\xE1s seguro de que deseas limpiar el formulario?")||(this.formData={name:"",description:"",price:0,category:"",image:"img/t-rex.png",stock:0,featured:!1},this.isFormDirty=!1,this.successMessage="",this.errorMessage="")}static \u0275fac=function(d){return new(d||a)};static \u0275cmp=x({type:a,selectors:[["app-product-form"]],decls:75,vars:20,consts:[[1,"product-form"],[1,"product-form__header"],[1,"product-form__title"],[1,"product-form__subtitle"],[1,"product-form__alert","product-form__alert--success"],[1,"product-form__alert","product-form__alert--error"],[1,"product-form__form",3,"ngSubmit"],[1,"product-form__grid"],[1,"product-form__field","product-form__field--full"],["for","name",1,"product-form__label"],[1,"product-form__required"],["type","text","id","name","name","name","placeholder","Ej: Kit Excavaci\xF3n T-Rex","required","",1,"product-form__input",3,"ngModelChange","ngModel"],["for","description",1,"product-form__label"],["id","description","name","description","placeholder","Describe el producto...","rows","4","required","",1,"product-form__textarea",3,"ngModelChange","ngModel"],[1,"product-form__field"],["for","price",1,"product-form__label"],["type","number","id","price","name","price","min","0","step","0.01","required","",1,"product-form__input",3,"ngModelChange","ngModel"],["for","stock",1,"product-form__label"],["type","number","id","stock","name","stock","min","0",1,"product-form__input",3,"ngModelChange","ngModel"],["for","category",1,"product-form__label"],["id","category","name","category","required","",1,"product-form__select",3,"ngModelChange","ngModel"],["value","","disabled",""],[3,"value"],["for","image",1,"product-form__label"],["id","image","name","image",1,"product-form__select",3,"ngModelChange","ngModel"],[1,"product-form__field","product-form__field--checkbox"],[1,"product-form__checkbox-label"],["type","checkbox","name","featured",1,"product-form__checkbox",3,"ngModelChange","ngModel"],[1,"product-form__preview"],[1,"product-form__preview-card"],["alt","Preview",3,"src"],[1,"product-form__preview-info"],[1,"product-form__preview-category"],[1,"product-form__actions"],["type","submit",1,"product-form__btn","product-form__btn--primary",3,"disabled"],["type","button",1,"product-form__btn","product-form__btn--secondary",3,"click","disabled"],["routerLink","/productos",1,"product-form__btn","product-form__btn--outline"],[1,"product-form__dirty-indicator"]],template:function(d,e){d&1&&(t(0,"section",0)(1,"header",1)(2,"h1",2),o(3,"\u2795 Nuevo Producto"),r(),t(4,"p",3),o(5,"A\xF1ade un nuevo producto al cat\xE1logo de EducaDino"),r()(),f(6,X,2,1,"div",4),f(7,Y,2,1,"div",5),t(8,"form",6),m("ngSubmit",function(){return e.onSubmit()}),t(9,"div",7)(10,"div",8)(11,"label",9),o(12," Nombre del producto "),t(13,"span",10),o(14,"*"),r()(),t(15,"input",11),u("ngModelChange",function(n){return s(e.formData.name,n)||(e.formData.name=n),n}),m("ngModelChange",function(){return e.onFieldChange()}),r()(),t(16,"div",8)(17,"label",12),o(18," Descripci\xF3n "),t(19,"span",10),o(20,"*"),r()(),t(21,"textarea",13),u("ngModelChange",function(n){return s(e.formData.description,n)||(e.formData.description=n),n}),m("ngModelChange",function(){return e.onFieldChange()}),r()(),t(22,"div",14)(23,"label",15),o(24," Precio (\u20AC) "),t(25,"span",10),o(26,"*"),r()(),t(27,"input",16),u("ngModelChange",function(n){return s(e.formData.price,n)||(e.formData.price=n),n}),m("ngModelChange",function(){return e.onFieldChange()}),r()(),t(28,"div",14)(29,"label",17),o(30,"Stock"),r(),t(31,"input",18),u("ngModelChange",function(n){return s(e.formData.stock,n)||(e.formData.stock=n),n}),m("ngModelChange",function(){return e.onFieldChange()}),r()(),t(32,"div",14)(33,"label",19),o(34," Categor\xEDa "),t(35,"span",10),o(36,"*"),r()(),t(37,"select",20),u("ngModelChange",function(n){return s(e.formData.category,n)||(e.formData.category=n),n}),m("ngModelChange",function(){return e.onFieldChange()}),t(38,"option",21),o(39,"Selecciona una categor\xEDa"),r(),y(40,Z,2,2,"option",22,S),r()(),t(42,"div",14)(43,"label",23),o(44,"Imagen"),r(),t(45,"select",24),u("ngModelChange",function(n){return s(e.formData.image,n)||(e.formData.image=n),n}),m("ngModelChange",function(){return e.onFieldChange()}),y(46,$,2,2,"option",22,H),r()(),t(48,"div",25)(49,"label",26)(50,"input",27),u("ngModelChange",function(n){return s(e.formData.featured,n)||(e.formData.featured=n),n}),m("ngModelChange",function(){return e.onFieldChange()}),r(),t(51,"span"),o(52,"\u2B50 Marcar como producto destacado"),r()()()(),t(53,"aside",28)(54,"h3"),o(55,"Vista previa"),r(),t(56,"div",29),D(57,"img",30),t(58,"div",31)(59,"span",32),o(60),r(),t(61,"h4"),o(62),r(),t(63,"p"),o(64),F(65,"currency"),r()()()(),t(66,"div",33)(67,"button",34),f(68,ee,1,0)(69,te,1,0),r(),t(70,"button",35),m("click",function(){return e.resetForm()}),o(71," \u{1F504} Limpiar "),r(),t(72,"a",36),o(73," \u2190 Cancelar "),r()(),f(74,re,2,0,"p",37),r()()),d&2&&(i(6),v(e.successMessage?6:-1),i(),v(e.errorMessage?7:-1),i(8),p("ngModel",e.formData.name),i(6),p("ngModel",e.formData.description),i(6),p("ngModel",e.formData.price),i(4),p("ngModel",e.formData.stock),i(6),p("ngModel",e.formData.category),i(3),C(e.categories),i(5),p("ngModel",e.formData.image),i(),C(e.availableImages),i(4),p("ngModel",e.formData.featured),i(7),g("src",e.formData.image,P),i(3),_(e.formData.category||"Categor\xEDa"),i(2),_(e.formData.name||"Nombre del producto"),i(2),_(w(65,17,e.formData.price,"EUR")),i(3),g("disabled",e.isSubmitting),i(),v(e.isSubmitting?68:69),i(2),g("disabled",e.isSubmitting),i(4),v(e.isFormDirty?74:-1))},dependencies:[E,J,V,j,G,N,A,W,R,I,L,U,K,B,q,T,O],styles:[".product-form[_ngcontent-%COMP%]{padding:var(--spacing-4);max-width:900px;margin:0 auto}.product-form__header[_ngcontent-%COMP%]{text-align:center;margin-bottom:var(--spacing-4)}.product-form__title[_ngcontent-%COMP%]{font-family:var(--font-secondary);font-size:var(--font-size-4xl);color:var(--primary-color);margin-bottom:var(--spacing-1)}.product-form__subtitle[_ngcontent-%COMP%]{font-family:var(--font-primary);font-size:var(--font-size-xl);color:var(--text-color)}.product-form__alert[_ngcontent-%COMP%]{padding:var(--spacing-2);border-radius:8px;margin-bottom:var(--spacing-3);font-family:var(--font-primary);font-size:var(--font-size-xl);text-align:center}.product-form__alert--success[_ngcontent-%COMP%]{background-color:#d1fae5;border:1px solid #10b981;color:#065f46}.product-form__alert--error[_ngcontent-%COMP%]{background-color:#fee2e2;border:1px solid #ef4444;color:#b91c1c}.product-form__form[_ngcontent-%COMP%]{background-color:var(--background-color-hover);border-radius:20px;padding:var(--spacing-4)}.product-form__grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:var(--spacing-3)}@media(max-width:600px){.product-form__grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.product-form__field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:var(--spacing-1)}.product-form__field--full[_ngcontent-%COMP%], .product-form__field--checkbox[_ngcontent-%COMP%]{grid-column:1/-1}.product-form__label[_ngcontent-%COMP%]{font-family:var(--font-primary);font-size:var(--font-size-xl);font-weight:var(--font-weight-medium);color:var(--text-color)}.product-form__required[_ngcontent-%COMP%]{color:var(--support-color)}.product-form__input[_ngcontent-%COMP%], .product-form__select[_ngcontent-%COMP%], .product-form__textarea[_ngcontent-%COMP%]{padding:var(--spacing-2);border:2px solid var(--gray-scale);border-radius:10px;font-family:var(--font-primary);font-size:var(--font-size-xl);transition:border-color .3s ease;background-color:#fff}.product-form__input[_ngcontent-%COMP%]:focus, .product-form__select[_ngcontent-%COMP%]:focus, .product-form__textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color)}.product-form__textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.product-form__checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-1);font-family:var(--font-primary);font-size:var(--font-size-xl);color:var(--text-color);cursor:pointer}.product-form__checkbox[_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer}.product-form__preview[_ngcontent-%COMP%]{margin-top:var(--spacing-4);padding-top:var(--spacing-3);border-top:2px dashed var(--gray-scale)}.product-form__preview[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:var(--font-secondary);font-size:var(--font-size-2xl);color:var(--primary-color);margin-bottom:var(--spacing-2);text-align:center}.product-form__preview-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:var(--spacing-2);background-color:var(--background-color);border-radius:12px;padding:var(--spacing-2);max-width:400px;margin:0 auto}.product-form__preview-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;object-fit:contain}.product-form__preview-info[_ngcontent-%COMP%]{flex:1}.product-form__preview-category[_ngcontent-%COMP%]{display:inline-block;background-color:var(--secondary-color);color:var(--text-color-light);padding:2px 8px;border-radius:10px;font-size:var(--font-size-sm);margin-bottom:4px}.product-form__preview-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-family:var(--font-secondary);font-size:var(--font-size-xl);color:var(--primary-color);margin:0}.product-form__preview-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:var(--font-primary);font-size:var(--font-size-2xl);color:var(--support-color);font-weight:var(--font-weight-bold);margin:4px 0 0}.product-form__actions[_ngcontent-%COMP%]{display:flex;gap:var(--spacing-2);justify-content:center;flex-wrap:wrap;margin-top:var(--spacing-4);padding-top:var(--spacing-3);border-top:2px solid var(--background-color)}.product-form__btn[_ngcontent-%COMP%]{padding:var(--spacing-2) var(--spacing-4);border-radius:12px;font-family:var(--font-primary);font-size:var(--font-size-xl);font-weight:var(--font-weight-semibold);cursor:pointer;transition:all .3s ease;text-decoration:none;border:none}.product-form__btn[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.product-form__btn--primary[_ngcontent-%COMP%]{background-color:var(--primary-color);color:var(--text-color-light)}.product-form__btn--primary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--primary-color-hover)}.product-form__btn--secondary[_ngcontent-%COMP%]{background-color:var(--secondary-color);color:var(--text-color-light)}.product-form__btn--secondary[_ngcontent-%COMP%]:hover:not(:disabled){background-color:var(--secondary-color-hover)}.product-form__btn--outline[_ngcontent-%COMP%]{background-color:transparent;color:var(--text-color);border:2px solid var(--gray-scale)}.product-form__btn--outline[_ngcontent-%COMP%]:hover{border-color:var(--primary-color);color:var(--primary-color)}.product-form__dirty-indicator[_ngcontent-%COMP%]{text-align:center;margin-top:var(--spacing-2);font-family:var(--font-primary);font-size:var(--font-size-lg);color:var(--support-color);animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.5}}"]})};export{Q as ProductForm};
